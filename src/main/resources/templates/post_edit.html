<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head"></head>

<body class="sub_page">

    <div class="hero_area">
        <div class="bg-box">
            <img src="images/nav-bg.jpg" alt="">
        </div>
        <header th:replace="fragments/header :: header"></header>
    </div>

    <!-- Add Post Section -->
    <section class="food_section layout_padding">
        <div class="container">
            <div class="heading_container">
                <h3>Add Post</h3>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form_container">
                        <form th:action="@{'/post/{id}/edit' (id=${post.id})}" method="post" th:object="${post}">
                            <!-- Error messages for form validation -->
                            <div th:if="${#fields.hasErrors('*')}" class="alert alert-danger">
                                <ul>
                                    <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
                                </ul>
                            </div>
                            
                            <!-- Flash messages (success/error) -->
                            <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
                            <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
                    
                            <div class="form-group">
                                <input type="hidden" id="account" name="account" th:field="*{account}" />
                            </div>
                            <div class="form-group">
                                <input id="title" th:field="*{title}" type="text" class="form-control" placeholder="Title" />
                                <!-- Add specific field error message if needed -->
                                <span th:if="${#fields.hasErrors('title')}" th:errors="*{title}" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <textarea id="editor" th:field="*{body}" class="form-control" placeholder="Body"></textarea>
                                <!-- Add specific field error message if needed -->
                                <span th:if="${#fields.hasErrors('body')}" th:errors="*{body}" class="text-danger"></span>
                            </div>
                            <div class="btn_box">
                                <button type="submit" class="btn btn-primary">Edit Post</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end book section -->

    <footer th:replace="fragments/footer :: footer"></footer>

</body>
</html>
